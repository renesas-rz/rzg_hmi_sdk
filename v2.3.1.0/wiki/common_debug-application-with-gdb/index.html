<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="The best solution for starting your HMI applications." name=description><meta content="Renesas Electronics Corporation" name=author><link href=https://renesas-rz.github.io/rzg_hmi_sdk/v2.3.1.0/wiki/common_debug-application-with-gdb/ rel=canonical><link href=../../assets/icons/6723.T.png rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.6.15" name=generator><title>Debug application with GDB - Renesas RZ/G HMI SDK</title><link href=../../assets/stylesheets/main.342714a4.min.css rel=stylesheet><link href=../../assets/stylesheets/palette.06af60db.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../assets/stylesheets/extra.a766af.min.css rel=stylesheet><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><div id=google_translate_element></div><script>var userLang = navigator.language || navigator.userLanguage || navigator.languages;
  if (userLang.substr(0,2) != "en"){
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT
      }, 'google_translate_element');
    }
  }
  else {
    document.getElementById("google_translate_element").style.display="none";
  }</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>html.glightbox-open{overflow:initial;height:100%}.gslide-title{user-select:text;margin-top:0}.gslide-desc{color:#666;user-select:text}.gslide-image img{background:#fff}.gscrollbar-fixer{padding-right:15px}.gdesc-inner{font-size:.75rem}body[data-md-color-scheme=slate] .gdesc-inner{background:var(--md-default-bg-color)}body[data-md-color-scheme=slate] .gslide-title,body[data-md-color-scheme=slate] .gslide-desc{color:var(--md-default-fg-color)}</style><script src=../../assets/javascripts/glightbox.min.js></script></head><body data-md-color-accent=indigo data-md-color-primary=custom data-md-color-scheme=default dir=ltr><input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox><input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox><label class=md-overlay for=__drawer></label><div data-md-component=skip><a class=md-skip href=#debug-application-with-gdb> Skip to content </a></div><div data-md-component=announce><aside class=md-banner><div class="md-banner__inner md-grid md-typeset"><button aria-label="Don't show this again" class="md-banner__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button><p><strong>Announcement!</strong> RZ/G HMI SDK v2.3.1.0 is <a href=../../#whats-new>available</a>. <br></p></div><script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script></aside></div><div data-md-color-scheme=default data-md-component=outdated hidden><aside class="md-banner md-banner--warning"><div class="md-banner__inner md-grid md-typeset"><p style=margin:0;font-size:2.85em><strong> You're not viewing the latest version! <a href=../../..> Click here to go to latest. </a> </strong></p></div><script>function sleep(e){return new Promise(t=>setTimeout(t,e))}async function check(){for(var e=document.querySelector("[data-md-component=outdated]"),t=document.querySelector("[data-md-component=announce]"),n=document.querySelector("[data-md-component=sidebar]"),o=new URL("../..",location),d=__md_get("__outdated",sessionStorage,o);null===d||null===n;)await sleep(100),d=__md_get("__outdated",sessionStorage,o),n=document.querySelector("[data-md-component=sidebar]");if(!0===d&&e){e.hidden=!1;var a=e.getBoundingClientRect();a.width<1200&&n&&(n.style.top=a.height.toString()+"px")}!0===d&&t&&(t.hidden=!0)}check();</script></aside></div><header class="md-header md-header--shadow" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><label class="md-header__button md-icon" for=__drawer><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component><div class=md-header__ellipsis><div class=md-header__topic><span class="md-ellipsis header-link header-link-no-icon"> <a title="Renesas RZ/G HMI SDK" data-md-component=logo href=../..> Renesas RZ/G HMI SDK </a> </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Debug application with GDB </span></div></div></div><label class="md-header__button md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text><label class="md-search__icon md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav aria-label=Search class=md-search__options><button class="md-search__icon md-icon" aria-label=Clear tabindex=-1 title=Clear type=reset><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap data-md-scrollfix tabindex=0><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>Initializing search</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a title="Go to repository" class=md-source data-md-component=source href=https://github.com/renesas-rz/rzg_hmi_sdk target=_blank> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div> <div class=md-source__repository>rzg_hmi_sdk</div> </a></div></nav><script>async function check2(){for(var t=document.querySelector("[data-md-component=outdated]"),e=document.querySelector("[data-md-component=announce]"),o=document.querySelector("[data-md-component=header]"),n=document.querySelector("[data-md-component=sidebar]"),a=new URL("../..",location),d=__md_get("__outdated",sessionStorage,a);null===d;)await sleep(100),d=__md_get("__outdated",sessionStorage,a);if(!0===d&&t&&o){t.getAttribute("style")||(t.style.position="sticky",t.style.top=0,t.style.zIndex=99999),e&&(e.hidden=!0);var i=t.getBoundingClientRect();o.getAttribute("style")||o.style.top||0!==o.style.top||(o.style.top=i.height.toString()+"px"),window.location.href.indexOf("#")>-1&&window.scrollBy(0,-i.height),i.width<1200&&n&&(await sleep(100),n.style.top=i.height.toString()+"px")}}check2();</script><script>async function getSizes(){var t,n=document.querySelector("[data-md-component=outdated]"),o=document.querySelector("[data-md-component=announce]"),a=document.querySelector("[data-md-component=header]"),d=document.querySelector("[data-md-component=sidebar]"),i=document.querySelector("[data-md-component=top]");if(!0===__md_get("__outdated",sessionStorage,new URL("../..",location))&&n&&a){n.getAttribute("style")||(n.style.position="sticky",n.style.top=0,n.style.zIndex=99999),o&&(o.hidden=!0);var c=n.getBoundingClientRect();a.style.top=c.height.toString()+"px",i&&(i.style.top=(64+c.height).toString()+"px"),c.width<1200&&d&&(await sleep(100),d.style.top=c.height.toString()+"px")}}async function check3(e){if(e.srcElement&&("headerlink"===e.srcElement.className||"md-ellipsis"===e.srcElement.className)){var t,n=document.querySelector("[data-md-component=outdated]"),o=document.querySelector("[data-md-component=announce]");if(!0===__md_get("__outdated",sessionStorage,new URL("../..",location))){var a=n.getBoundingClientRect();do await sleep(100),n.style.position="sticky",n.style.top=0,n.style.zIndex=99999,o&&(o.hidden=!0),await sleep(100),n=document.querySelector("[data-md-component=outdated]");while(!n.getAttribute("style"));await sleep(100),window.scrollBy(0,-a.height)}}}window.addEventListener("resize",getSizes,!1),window.addEventListener("scroll",getSizes,!1),window.addEventListener("click",check3,!1);</script></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><div class="md-nav-top-title md-nav-top-no-icon"><a href=../.. id=md-nav-top-home> Renesas RZ/G HMI SDK </a><div class="md-nav-top-logos md-typeset"><a href=https://renesas-rz.github.io/rz_solution/ target=_blank> <img src=../../assets/images/Explore_more_RZ_Linux_Solutions.png> </a><a href=../../download/ target> <img src="../../assets/images/Get the Board and Software.png"> </a><hr></div></div></label><div class=md-nav__source><a title="Go to repository" class=md-source data-md-component=source href=https://github.com/renesas-rz/rzg_hmi_sdk target=_blank> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div> <div class=md-source__repository>rzg_hmi_sdk</div> </a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item id=md-nav-top-btn><a href=https://renesas-rz.github.io/rz_solution/ target=_blank> <img src=../../assets/images/Explore_more_RZ_Linux_Solutions.png> </a></li><li class=md-nav__item id=md-nav-top-btn><a class="md-nav__link md-button md-button--primary btn-yellow" href=../../download/ target> <span class=md-ellipsis> Get the Board and Software </span> </a></li><li class=md-nav__item><a class=md-nav__link href=../..> <span class=md-ellipsis> Home </span> </a></li><li class=md-nav__item><a href=../../overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a></li><li class=md-nav__item><a href=../../getting_started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a></li><li class=md-nav__item><a href=../../how_to_build_hmi_sdk/ class=md-nav__link> <span class=md-ellipsis> How To Build HMI SDK </span> </a></li><li class=md-nav__item><a href=../ class=md-nav__link> <span class=md-ellipsis> Wiki </span> </a></li><li class=md-nav__item><a href=../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a></li></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><div><h1 id=debug-application-with-gdb>Debug application with GDB<a title="Permanent link" class=headerlink href=#debug-application-with-gdb>¶</a></h1><p>This guide describes the use of GDB to debug programs created in C on the EVK. For more detailed information about GDB, refer to <a href=https://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_toc.html>Debugging with GDB</a>.</p><p>You need to connect your PC to the EVK, and you need to install the following terminal program to run and debug the target program on the EVK.</p><div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Windows PC</label><label for=__tabbed_1_2>Linux PC</label></div><div class=tabbed-content><div class=tabbed-block><p><a href=https://github.com/TeraTermProject/teraterm/releases>Tera Term (terminal software)</a></p><p><a href=https://www.ftdichip.com/Drivers/VCP.htm>FTDI VCP driver</a></p></div><div class=tabbed-block><p><a href=https://help.ubuntu.com/community/Minicom>minicom</a></p></div></div></div><h2 id=table-of-contents><strong>Table of Contents</strong><a title="Permanent link" class=headerlink href=#table-of-contents>¶</a></h2><ul><li><a href=#1-how-to-use-gdb>1. How to use GDB</a><ul><li><a href=#1-1-give-debugging-symbols-and-execute-compilation>1-1. Give debugging symbols and execute compilation</a></li><li><a href=#1-2-execute-the-created-program-in-gdb>1-2. Execute the created program in GDB</a></li><li><a href=#1-3-stops-a-program-running-in-gdb>1-3. Stops a program running in GDB</a></li><li><a href=#1-4-exit-gdb>1-4. Exit GDB</a></li><li><a href=#1-5-display-gdb-help>1-5. Display GDB help</a></li></ul></li><li><a href=#2-monitor-program-execution>2. Monitor program execution</a><ul><li><a href=#2-1-interrupts-the-execution-of-the-program>2-1. Interrupts the execution of the program</a></li><li><a href=#2-2-continue-program-execution>2-2. Continue program execution</a></li><li><a href=#2-3-check-the-interruption-points-of-the-program>2-3. Check the interruption points of the program</a></li><li><a href=#2-4-execute-the-program-code-line-by-line>2-4. Execute the program code line by line</a></li><li><a href=#2-5-check-the-contents-of-program-variables>2-5. Check the contents of program variables</a></li><li><a href=#2-6-change-program-variables>2-6. Change program variables</a></li><li><a href=#2-7-calls-a-specific-function-linked-to-the-program>2-7. Calls a specific function linked to the program</a></li><li><a href=#2-8-return-from-program-functions>2-8. Return from program functions</a></li></ul></li><li><a href=#3-set-breakpoints>3. Set breakpoints</a><ul><li><a href=#3-1-set-breakpoints-on-specific-lines>3-1. Set breakpoints on specific lines</a></li><li><a href=#3-2-set-a-breakpoint-in-the-function>3-2. Set a breakpoint in the function</a></li><li><a href=#3-3-obtain-a-list-of-breakpoints>3-3. Obtain a list of breakpoints</a></li><li><a href=#3-4-disable-breakpoints>3-4. Disable breakpoints</a></li></ul></li><li><a href=#4-set-watchpoints>4. Set watchpoints</a><ul><li><a href=#4-1-set-watchpoints-for-variable-writes>4-1. Set watchpoints for variable writes</a></li><li><a href=#4-2-set-watchpoints-for-variable-reads>4-2. Set watchpoints for variable reads</a></li><li><a href=#4-3-set-watchpoints-for-reading-and-writing-variables>4-3. Set watchpoints for reading and writing variables</a></li><li><a href=#4-4-obtain-a-list-of-watchpoints>4-4. Obtain a list of watchpoints</a></li><li><a href=#4-5-disable-watchpoints>4-5. Disable watchpoints</a></li></ul></li><li><a href=#5-execute-call-stack>5. Execute call stack</a><ul><li><a href=#5-1-obtain-a-backtrace-of-the-function>5-1. Obtain a backtrace of the function</a></li><li><a href=#5-2-change-the-stack-frame>5-2. Change the stack frame</a></li><li><a href=#5-3-analyze-stack-frames>5-3. Analyze stack frames</a></li></ul></li><li><a href=#6-examples>6. Examples</a><ul><li><a href=#6-1-example-1-of-infinite-loop-analysis>6-1. Example 1 of infinite loop analysis</a></li><li><a href=#6-2-example-2-of-infinite-loop-analysis>6-2. Example 2 of infinite loop analysis</a></li><li><a href=#6-3-segmentation-fault-analysis-example>6-3. Segmentation Fault Analysis Example</a></li></ul></li></ul><h2 id=1-how-to-use-gdb>1. How to use GDB<a title="Permanent link" class=headerlink href=#1-how-to-use-gdb>¶</a></h2><p>This chapter explains how to prepare for debugging an application and how to start/stop basic GDB.</p><p>The gdb command is not installed in the HMI SDK environment by default. To install gdb, you need to build HMI SDK environment after changing configuration. To build HMI SDK environment, see <a href=../../how_to_build_hmi_sdk/ >How to Build HMI SDK</a>. In the build procedure, modify configuration file before you run bitbake command.</p><ol><li><p class=dollar>Open the configuration file</p><div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=nb>cd</span><span class=w> </span><span class=si>${</span><span class=nv>WORK</span><span class=si>}</span>/build
</span><span id=__span-0-2><a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>vim<span class=w> </span>conf/local.conf
</span></code></pre></div></li><li><p>Add the following settings to the configuration files</p><div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a>WHITELIST_GPL-3.0 += " tools-debug gdb autoconf-native bison-native gettext-native gnu-config-native readline"
</span><span id=__span-1-2><a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a>IMAGE_INSTALL_append = " gdb"
</span><span id=__span-1-3><a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a>EXTRA_IMAGE_FEATURES_append = " tools-debug"
</span></code></pre></div></li><li><p class=dollar>Run bitbake with gdb alone to make sure no error occurs.</p><div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=nv>MACHINE</span><span class=o>=</span><span class=si>${</span><span class=nv>BOARD</span><span class=si>}</span><span class=w> </span>bitbake<span class=w> </span>gdb
</span></code></pre></div></li><li><p>Run bitbake to build images (See <a href=../../how_to_build_hmi_sdk/ >How to Build HMI SDK</a>.)</p></li></ol><h3 id=1-1-give-debugging-symbols-and-execute-compilation>1-1. Give debugging symbols and execute compilation<a title="Permanent link" class=headerlink href=#1-1-give-debugging-symbols-and-execute-compilation>¶</a></h3><p>The -g flag must be passed to the compiler to grant debugging symbols.<br> Add the -g flag to the Makefile. Add the -O0 flag to disable optimization.</p><p></p><div class="language-bash highlight"><span class=filename>Makefile</span><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=nv>APP</span><span class=w> </span><span class=o>=</span><span class=w> </span>testprog
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a><span class=nv>SRC</span><span class=w> </span><span class=o>=</span><span class=w> </span>main.c
</span><span id=__span-3-3><a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a>all:<span class=w> </span><span class=k>$(</span>APP<span class=k>)</span>
</span><span id=__span-3-4><a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=nv>CC</span><span class=w> </span><span class=o>=</span><span class=w> </span>gcc
</span><span id=__span-3-5><a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=nv>CFLAGS</span><span class=w> </span><span class=o>=</span><span class=w> </span>-g<span class=w> </span>-O0<span class=w> </span>-Wall
</span><span id=__span-3-6><a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=k>$(</span>APP<span class=k>)</span>:
</span><span id=__span-3-7><a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a><span class=w>        </span><span class=k>$(</span>CC<span class=k>)</span><span class=w> </span>-o<span class=w> </span><span class=k>$(</span>APP<span class=k>)</span><span class=w> </span><span class=k>$(</span>SRC<span class=k>)</span><span class=w> </span><span class=k>$(</span>CFLAGS<span class=k>)</span>
</span><span id=__span-3-8><a href=#__codelineno-3-8 id=__codelineno-3-8 name=__codelineno-3-8></a>clean:
</span><span id=__span-3-9><a href=#__codelineno-3-9 id=__codelineno-3-9 name=__codelineno-3-9></a><span class=w>        </span>rm<span class=w> </span>-rf<span class=w> </span><span class=k>$(</span>APP<span class=k>)</span>
</span></code></pre></div> The source code should be the following. <div class="language-bash highlight"><span class=filename>main.c</span><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=c1>#include &lt;stdio.h></span>
</span><span id=__span-4-2><a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a>
</span><span id=__span-4-3><a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a>int<span class=w> </span>func1<span class=o>(</span>int<span class=w> </span>num<span class=o>)</span>
</span><span id=__span-4-4><a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=o>{</span>
</span><span id=__span-4-5><a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a><span class=w>   </span>static<span class=w> </span>int<span class=w> </span><span class=nv>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-4-6><a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=w>   </span><span class=nv>sum</span><span class=w> </span><span class=o>+=</span><span class=w> </span>num<span class=p>;</span>
</span><span id=__span-4-7><a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a><span class=w>   </span><span class=k>return</span><span class=w> </span>sum<span class=p>;</span>
</span><span id=__span-4-8><a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a><span class=o>}</span>
</span><span id=__span-4-9><a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a>
</span><span id=__span-4-10><a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a>int<span class=w> </span>main<span class=o>(</span>int<span class=w> </span>argc,<span class=w> </span>char**<span class=w> </span>argv<span class=o>)</span>
</span><span id=__span-4-11><a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a><span class=o>{</span>
</span><span id=__span-4-12><a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a><span class=w>   </span>int<span class=w> </span>num<span class=p>;</span>
</span><span id=__span-4-13><a href=#__codelineno-4-13 id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>   </span><span class=nv>num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1</span><span class=p>;</span>
</span><span id=__span-4-14><a href=#__codelineno-4-14 id=__codelineno-4-14 name=__codelineno-4-14></a><span class=w>   </span><span class=k>while</span><span class=o>(</span><span class=m>1</span><span class=o>){</span>
</span><span id=__span-4-15><a href=#__codelineno-4-15 id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>      </span><span class=k>if</span><span class=o>(</span>num<span class=w> </span>><span class=w> </span><span class=m>5000</span><span class=o>){</span>
</span><span id=__span-4-16><a href=#__codelineno-4-16 id=__codelineno-4-16 name=__codelineno-4-16></a><span class=w>         </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-4-17><a href=#__codelineno-4-17 id=__codelineno-4-17 name=__codelineno-4-17></a><span class=w>      </span><span class=o>}</span>
</span><span id=__span-4-18><a href=#__codelineno-4-18 id=__codelineno-4-18 name=__codelineno-4-18></a><span class=w>      </span>func1<span class=o>(</span>num<span class=o>)</span><span class=p>;</span>
</span><span id=__span-4-19><a href=#__codelineno-4-19 id=__codelineno-4-19 name=__codelineno-4-19></a><span class=w>   </span><span class=o>}</span>
</span><span id=__span-4-20><a href=#__codelineno-4-20 id=__codelineno-4-20 name=__codelineno-4-20></a><span class=w>   </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-4-21><a href=#__codelineno-4-21 id=__codelineno-4-21 name=__codelineno-4-21></a><span class=o>}</span>
</span></code></pre></div><h3 id=1-2-execute-the-created-program-in-gdb>1-2. Execute the created program in GDB<a title="Permanent link" class=headerlink href=#1-2-execute-the-created-program-in-gdb>¶</a></h3><p>Execute gdb with the program compiled with the -g flag as an argument.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a># gdb testprog
</span><span id=__span-5-2><a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a>...
</span><span id=__span-5-3><a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a>For help, type "help".
</span><span id=__span-5-4><a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a>Type "apropos word" to search for commands related to "word"...
</span><span id=__span-5-5><a href=#__codelineno-5-5 id=__codelineno-5-5 name=__codelineno-5-5></a>Reading symbols from testprog...
</span><span id=__span-5-6><a href=#__codelineno-5-6 id=__codelineno-5-6 name=__codelineno-5-6></a>(gdb)
</span></code></pre></div> The gdb prompt will be invoked, and the program will run when the run command is executed. When specifying arguments, enter arg1, arg2, and so on. <div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a>(gdb) run arg1 arg2
</span><span id=__span-6-2><a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a>Starting program: /home/root/debug/testprog arg1 arg2
</span></code></pre></div><h3 id=1-3-stops-a-program-running-in-gdb>1-3. Stops a program running in GDB<a title="Permanent link" class=headerlink href=#1-3-stops-a-program-running-in-gdb>¶</a></h3><p>To stop the program, use the kill command.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-7-1><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a>(gdb) kill
</span><span id=__span-7-2><a href=#__codelineno-7-2 id=__codelineno-7-2 name=__codelineno-7-2></a>Kill the program being debugged? (y or n) y
</span><span id=__span-7-3><a href=#__codelineno-7-3 id=__codelineno-7-3 name=__codelineno-7-3></a>[Inferior 1 (process 46857) killed]
</span><span id=__span-7-4><a href=#__codelineno-7-4 id=__codelineno-7-4 name=__codelineno-7-4></a>(gdb)
</span></code></pre></div> To run the program again, execute the run command. <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a>(gdb) run
</span><span id=__span-8-2><a href=#__codelineno-8-2 id=__codelineno-8-2 name=__codelineno-8-2></a>Starting program: /home/root/debug/testprog
</span></code></pre></div><h3 id=1-4-exit-gdb>1-4. Exit GDB<a title="Permanent link" class=headerlink href=#1-4-exit-gdb>¶</a></h3><p>To exit GDB, use the quit command.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a>(gdb) quit
</span></code></pre></div><h3 id=1-5-display-gdb-help>1-5. Display GDB help<a title="Permanent link" class=headerlink href=#1-5-display-gdb-help>¶</a></h3><p>If you want to check the help for GDB commands, use the help command.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a>(gdb) help
</span><span id=__span-10-2><a href=#__codelineno-10-2 id=__codelineno-10-2 name=__codelineno-10-2></a>List of classes of commands:
</span><span id=__span-10-3><a href=#__codelineno-10-3 id=__codelineno-10-3 name=__codelineno-10-3></a>
</span><span id=__span-10-4><a href=#__codelineno-10-4 id=__codelineno-10-4 name=__codelineno-10-4></a>aliases -- Aliases of other commands.
</span><span id=__span-10-5><a href=#__codelineno-10-5 id=__codelineno-10-5 name=__codelineno-10-5></a>breakpoints -- Making program stop at certain points.
</span><span id=__span-10-6><a href=#__codelineno-10-6 id=__codelineno-10-6 name=__codelineno-10-6></a>data -- Examining data.
</span><span id=__span-10-7><a href=#__codelineno-10-7 id=__codelineno-10-7 name=__codelineno-10-7></a>files -- Specifying and examining files.
</span><span id=__span-10-8><a href=#__codelineno-10-8 id=__codelineno-10-8 name=__codelineno-10-8></a>internals -- Maintenance commands.
</span><span id=__span-10-9><a href=#__codelineno-10-9 id=__codelineno-10-9 name=__codelineno-10-9></a>obscure -- Obscure features.
</span><span id=__span-10-10><a href=#__codelineno-10-10 id=__codelineno-10-10 name=__codelineno-10-10></a>running -- Running the program.
</span><span id=__span-10-11><a href=#__codelineno-10-11 id=__codelineno-10-11 name=__codelineno-10-11></a>stack -- Examining the stack.
</span><span id=__span-10-12><a href=#__codelineno-10-12 id=__codelineno-10-12 name=__codelineno-10-12></a>status -- Status inquiries.
</span><span id=__span-10-13><a href=#__codelineno-10-13 id=__codelineno-10-13 name=__codelineno-10-13></a>support -- Support facilities.
</span><span id=__span-10-14><a href=#__codelineno-10-14 id=__codelineno-10-14 name=__codelineno-10-14></a>tracepoints -- Tracing of program execution without stopping the program.
</span><span id=__span-10-15><a href=#__codelineno-10-15 id=__codelineno-10-15 name=__codelineno-10-15></a>user-defined -- User-defined commands.
</span><span id=__span-10-16><a href=#__codelineno-10-16 id=__codelineno-10-16 name=__codelineno-10-16></a>
</span><span id=__span-10-17><a href=#__codelineno-10-17 id=__codelineno-10-17 name=__codelineno-10-17></a>Type "help" followed by a class name for a list of commands in that class.
</span><span id=__span-10-18><a href=#__codelineno-10-18 id=__codelineno-10-18 name=__codelineno-10-18></a>Type "help all" for the list of all commands.
</span><span id=__span-10-19><a href=#__codelineno-10-19 id=__codelineno-10-19 name=__codelineno-10-19></a>Type "help" followed by command name for full documentation.
</span><span id=__span-10-20><a href=#__codelineno-10-20 id=__codelineno-10-20 name=__codelineno-10-20></a>Type "apropos word" to search for commands related to "word".
</span><span id=__span-10-21><a href=#__codelineno-10-21 id=__codelineno-10-21 name=__codelineno-10-21></a>Type "apropos -v word" for full documentation of commands related to "word".
</span><span id=__span-10-22><a href=#__codelineno-10-22 id=__codelineno-10-22 name=__codelineno-10-22></a>Command name abbreviations are allowed if unambiguous.
</span><span id=__span-10-23><a href=#__codelineno-10-23 id=__codelineno-10-23 name=__codelineno-10-23></a>(gdb)
</span></code></pre></div><h2 id=2-monitor-program-execution>2. Monitor program execution<a title="Permanent link" class=headerlink href=#2-monitor-program-execution>¶</a></h2><p>This chapter explains how to interrupt a program while it is running and proceed in the code to check and rewrite the contents of variables.</p><h3 id=2-1-interrupts-the-execution-of-the-program>2-1. Interrupts the execution of the program<a title="Permanent link" class=headerlink href=#2-1-interrupts-the-execution-of-the-program>¶</a></h3><p>Start the program.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-11-1><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a>(gdb) run
</span><span id=__span-11-2><a href=#__codelineno-11-2 id=__codelineno-11-2 name=__codelineno-11-2></a>Starting program: /home/root/debug/testprog
</span></code></pre></div> Then Ctrl+C to send a signal and stop execution. <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a>^C
</span><span id=__span-12-2><a href=#__codelineno-12-2 id=__codelineno-12-2 name=__codelineno-12-2></a>Program received signal SIGINT, Interrupt.
</span><span id=__span-12-3><a href=#__codelineno-12-3 id=__codelineno-12-3 name=__codelineno-12-3></a>0x000055555555516e in main (argc=1, argv=0x7fffffffe3a8) at main.c:16
</span><span id=__span-12-4><a href=#__codelineno-12-4 id=__codelineno-12-4 name=__codelineno-12-4></a>16          func1(num);
</span><span id=__span-12-5><a href=#__codelineno-12-5 id=__codelineno-12-5 name=__codelineno-12-5></a>(gdb)
</span></code></pre></div><h3 id=2-2-continue-program-execution>2-2. Continue program execution<a title="Permanent link" class=headerlink href=#2-2-continue-program-execution>¶</a></h3><p>To continue and resume an interrupted program, use the continue command.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-13-1><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a>(gdb) continue
</span><span id=__span-13-2><a href=#__codelineno-13-2 id=__codelineno-13-2 name=__codelineno-13-2></a>Continuing.
</span></code></pre></div><h3 id=2-3-check-the-interruption-points-of-the-program>2-3. Check the interruption points of the program<a title="Permanent link" class=headerlink href=#2-3-check-the-interruption-points-of-the-program>¶</a></h3><p>Use the list command to display the code around the point where the program was interrupted.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-14-1><a href=#__codelineno-14-1 id=__codelineno-14-1 name=__codelineno-14-1></a>(gdb) list
</span><span id=__span-14-2><a href=#__codelineno-14-2 id=__codelineno-14-2 name=__codelineno-14-2></a>11        int num = 1;
</span><span id=__span-14-3><a href=#__codelineno-14-3 id=__codelineno-14-3 name=__codelineno-14-3></a>12        while(1){
</span><span id=__span-14-4><a href=#__codelineno-14-4 id=__codelineno-14-4 name=__codelineno-14-4></a>13          if(num > 5000){
</span><span id=__span-14-5><a href=#__codelineno-14-5 id=__codelineno-14-5 name=__codelineno-14-5></a>14            break;
</span><span id=__span-14-6><a href=#__codelineno-14-6 id=__codelineno-14-6 name=__codelineno-14-6></a>15          }
</span><span id=__span-14-7><a href=#__codelineno-14-7 id=__codelineno-14-7 name=__codelineno-14-7></a>16          func1(num);
</span><span id=__span-14-8><a href=#__codelineno-14-8 id=__codelineno-14-8 name=__codelineno-14-8></a>17        }
</span><span id=__span-14-9><a href=#__codelineno-14-9 id=__codelineno-14-9 name=__codelineno-14-9></a>18        return 0;
</span><span id=__span-14-10><a href=#__codelineno-14-10 id=__codelineno-14-10 name=__codelineno-14-10></a>19      }
</span><span id=__span-14-11><a href=#__codelineno-14-11 id=__codelineno-14-11 name=__codelineno-14-11></a>20
</span><span id=__span-14-12><a href=#__codelineno-14-12 id=__codelineno-14-12 name=__codelineno-14-12></a>(gdb)
</span></code></pre></div><h3 id=2-4-execute-the-program-code-line-by-line>2-4. Execute the program code line by line<a title="Permanent link" class=headerlink href=#2-4-execute-the-program-code-line-by-line>¶</a></h3><p>To execute one line of code at a time with the program suspended, use the next or step command.<br> The next command advances the program one line, and if there is a function, it skips over the function call and executes the next code.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-15-1><a href=#__codelineno-15-1 id=__codelineno-15-1 name=__codelineno-15-1></a>(gdb) next
</span><span id=__span-15-2><a href=#__codelineno-15-2 id=__codelineno-15-2 name=__codelineno-15-2></a>16          func1(num);
</span><span id=__span-15-3><a href=#__codelineno-15-3 id=__codelineno-15-3 name=__codelineno-15-3></a>(gdb) next
</span><span id=__span-15-4><a href=#__codelineno-15-4 id=__codelineno-15-4 name=__codelineno-15-4></a>13          if(num > 5000){
</span></code></pre></div> The step command advances the program one line and moves inside the function, if any. <div class="language-text highlight"><pre><span></span><code><span id=__span-16-1><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a>(gdb) step
</span><span id=__span-16-2><a href=#__codelineno-16-2 id=__codelineno-16-2 name=__codelineno-16-2></a>16          func1(num);
</span><span id=__span-16-3><a href=#__codelineno-16-3 id=__codelineno-16-3 name=__codelineno-16-3></a>(gdb) step
</span><span id=__span-16-4><a href=#__codelineno-16-4 id=__codelineno-16-4 name=__codelineno-16-4></a>func1 (num=1) at main.c:4
</span><span id=__span-16-5><a href=#__codelineno-16-5 id=__codelineno-16-5 name=__codelineno-16-5></a>4       {
</span><span id=__span-16-6><a href=#__codelineno-16-6 id=__codelineno-16-6 name=__codelineno-16-6></a>(gdb) step
</span><span id=__span-16-7><a href=#__codelineno-16-7 id=__codelineno-16-7 name=__codelineno-16-7></a>6         sum += num;
</span><span id=__span-16-8><a href=#__codelineno-16-8 id=__codelineno-16-8 name=__codelineno-16-8></a>(gdb) step
</span><span id=__span-16-9><a href=#__codelineno-16-9 id=__codelineno-16-9 name=__codelineno-16-9></a>7       }
</span><span id=__span-16-10><a href=#__codelineno-16-10 id=__codelineno-16-10 name=__codelineno-16-10></a>(gdb) step
</span><span id=__span-16-11><a href=#__codelineno-16-11 id=__codelineno-16-11 name=__codelineno-16-11></a>main (argc=1, argv=0x7fffffffe3a8) at main.c:13
</span><span id=__span-16-12><a href=#__codelineno-16-12 id=__codelineno-16-12 name=__codelineno-16-12></a>13          if(num > 5000){
</span></code></pre></div><h3 id=2-5-check-the-contents-of-program-variables>2-5. Check the contents of program variables<a title="Permanent link" class=headerlink href=#2-5-check-the-contents-of-program-variables>¶</a></h3><p>To check the contents of a variable, use the print command.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-17-1><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a>(gdb) print num
</span><span id=__span-17-2><a href=#__codelineno-17-2 id=__codelineno-17-2 name=__codelineno-17-2></a>$1 = 1
</span><span id=__span-17-3><a href=#__codelineno-17-3 id=__codelineno-17-3 name=__codelineno-17-3></a>(gdb)
</span></code></pre></div><h3 id=2-6-change-program-variables>2-6. Change program variables<a title="Permanent link" class=headerlink href=#2-6-change-program-variables>¶</a></h3><p>To change the contents of a variable, use the set command.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-18-1><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a>(gdb) set num = 5001
</span><span id=__span-18-2><a href=#__codelineno-18-2 id=__codelineno-18-2 name=__codelineno-18-2></a>(gdb)
</span></code></pre></div><h3 id=2-7-calls-a-specific-function-linked-to-the-program>2-7. Calls a specific function linked to the program<a title="Permanent link" class=headerlink href=#2-7-calls-a-specific-function-linked-to-the-program>¶</a></h3><p>Use the call command to call any function.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-19-1><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a>(gdb) call func1(1)
</span><span id=__span-19-2><a href=#__codelineno-19-2 id=__codelineno-19-2 name=__codelineno-19-2></a>(gdb) step
</span><span id=__span-19-3><a href=#__codelineno-19-3 id=__codelineno-19-3 name=__codelineno-19-3></a>func1 (num=1) at main.c:4
</span><span id=__span-19-4><a href=#__codelineno-19-4 id=__codelineno-19-4 name=__codelineno-19-4></a>4       {
</span><span id=__span-19-5><a href=#__codelineno-19-5 id=__codelineno-19-5 name=__codelineno-19-5></a>(gdb)
</span></code></pre></div><h3 id=2-8-return-from-program-functions>2-8. Return from program functions<a title="Permanent link" class=headerlink href=#2-8-return-from-program-functions>¶</a></h3><p>To terminate execution of a function in the middle of a function and return to the caller, use the finish command.<br> The return value is also displayed when the command is executed.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-20-1><a href=#__codelineno-20-1 id=__codelineno-20-1 name=__codelineno-20-1></a>(gdb) finish
</span><span id=__span-20-2><a href=#__codelineno-20-2 id=__codelineno-20-2 name=__codelineno-20-2></a>Run till exit from #0  func1 (num=1) at main.c:6
</span><span id=__span-20-3><a href=#__codelineno-20-3 id=__codelineno-20-3 name=__codelineno-20-3></a>main (argc=1, argv=0x7fffffffe3a8) at main.c:14
</span><span id=__span-20-4><a href=#__codelineno-20-4 id=__codelineno-20-4 name=__codelineno-20-4></a>14          if(num > 5000){
</span><span id=__span-20-5><a href=#__codelineno-20-5 id=__codelineno-20-5 name=__codelineno-20-5></a>Value returned is $3 = 287125699
</span><span id=__span-20-6><a href=#__codelineno-20-6 id=__codelineno-20-6 name=__codelineno-20-6></a>(gdb)
</span></code></pre></div><h2 id=3-set-breakpoints>3. Set breakpoints<a title="Permanent link" class=headerlink href=#3-set-breakpoints>¶</a></h2><p>This chapter describes breakpoints. A breakpoint is a landmark point at which a program is interrupted at a specific line of code.<br> Breakpoints can be set on arbitrary lines of code or functions, and debugging is possible after interrupting the program because of step command or print command.</p><h3 id=3-1-set-breakpoints-on-specific-lines>3-1. Set breakpoints on specific lines<a title="Permanent link" class=headerlink href=#3-1-set-breakpoints-on-specific-lines>¶</a></h3><p>When set to line If there is only one source file, specify only the number of lines.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-21-1><a href=#__codelineno-21-1 id=__codelineno-21-1 name=__codelineno-21-1></a>(gdb) break 14
</span><span id=__span-21-2><a href=#__codelineno-21-2 id=__codelineno-21-2 name=__codelineno-21-2></a>Breakpoint 1 at 0x1167: file main.c, line 14.
</span><span id=__span-21-3><a href=#__codelineno-21-3 id=__codelineno-21-3 name=__codelineno-21-3></a>(gdb) run
</span><span id=__span-21-4><a href=#__codelineno-21-4 id=__codelineno-21-4 name=__codelineno-21-4></a>Starting program: /home/root/debug/testprog
</span><span id=__span-21-5><a href=#__codelineno-21-5 id=__codelineno-21-5 name=__codelineno-21-5></a>
</span><span id=__span-21-6><a href=#__codelineno-21-6 id=__codelineno-21-6 name=__codelineno-21-6></a>Breakpoint 1, main (argc=1, argv=0x7fffffffe3a8) at main.c:14
</span><span id=__span-21-7><a href=#__codelineno-21-7 id=__codelineno-21-7 name=__codelineno-21-7></a>14          if(num > 5000){
</span><span id=__span-21-8><a href=#__codelineno-21-8 id=__codelineno-21-8 name=__codelineno-21-8></a>(gdb)
</span></code></pre></div> If there are multiple source files, specify the file name and number of lines. <div class="language-text highlight"><pre><span></span><code><span id=__span-22-1><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a>(gdb) break main.c:6
</span><span id=__span-22-2><a href=#__codelineno-22-2 id=__codelineno-22-2 name=__codelineno-22-2></a>Breakpoint 1 at 0x1134: file main.c, line 6.
</span><span id=__span-22-3><a href=#__codelineno-22-3 id=__codelineno-22-3 name=__codelineno-22-3></a>(gdb) run
</span><span id=__span-22-4><a href=#__codelineno-22-4 id=__codelineno-22-4 name=__codelineno-22-4></a>Starting program: /home/root/debug/testprog
</span><span id=__span-22-5><a href=#__codelineno-22-5 id=__codelineno-22-5 name=__codelineno-22-5></a>
</span><span id=__span-22-6><a href=#__codelineno-22-6 id=__codelineno-22-6 name=__codelineno-22-6></a>Breakpoint 1, func1 (num=1) at main.c:6
</span><span id=__span-22-7><a href=#__codelineno-22-7 id=__codelineno-22-7 name=__codelineno-22-7></a>6         sum += num;
</span><span id=__span-22-8><a href=#__codelineno-22-8 id=__codelineno-22-8 name=__codelineno-22-8></a>(gdb)
</span></code></pre></div><h3 id=3-2-set-a-breakpoint-in-the-function>3-2. Set a breakpoint in the function<a title="Permanent link" class=headerlink href=#3-2-set-a-breakpoint-in-the-function>¶</a></h3><p>When setting to a function, specify the function name.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-23-1><a href=#__codelineno-23-1 id=__codelineno-23-1 name=__codelineno-23-1></a>(gdb) break func1
</span><span id=__span-23-2><a href=#__codelineno-23-2 id=__codelineno-23-2 name=__codelineno-23-2></a>Breakpoint 1 at 0x1129: file main.c, line 4.
</span><span id=__span-23-3><a href=#__codelineno-23-3 id=__codelineno-23-3 name=__codelineno-23-3></a>(gdb) run
</span><span id=__span-23-4><a href=#__codelineno-23-4 id=__codelineno-23-4 name=__codelineno-23-4></a>Starting program: /home/root/debug/testprog
</span><span id=__span-23-5><a href=#__codelineno-23-5 id=__codelineno-23-5 name=__codelineno-23-5></a>
</span><span id=__span-23-6><a href=#__codelineno-23-6 id=__codelineno-23-6 name=__codelineno-23-6></a>Breakpoint 1, func1 (num=21845) at main.c:4
</span><span id=__span-23-7><a href=#__codelineno-23-7 id=__codelineno-23-7 name=__codelineno-23-7></a>4       {
</span><span id=__span-23-8><a href=#__codelineno-23-8 id=__codelineno-23-8 name=__codelineno-23-8></a>(gdb)
</span></code></pre></div><h3 id=3-3-obtain-a-list-of-breakpoints>3-3. Obtain a list of breakpoints<a title="Permanent link" class=headerlink href=#3-3-obtain-a-list-of-breakpoints>¶</a></h3><p>Use the info breakpoints command to display a list of all currently set breakpoints.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-24-1><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a>(gdb) info breakpoint
</span><span id=__span-24-2><a href=#__codelineno-24-2 id=__codelineno-24-2 name=__codelineno-24-2></a>Num     Type           Disp Enb Address            What
</span><span id=__span-24-3><a href=#__codelineno-24-3 id=__codelineno-24-3 name=__codelineno-24-3></a>1       breakpoint     keep y   0x0000555555555129 in func1 at main.c:4
</span><span id=__span-24-4><a href=#__codelineno-24-4 id=__codelineno-24-4 name=__codelineno-24-4></a>        breakpoint already hit 1 time
</span><span id=__span-24-5><a href=#__codelineno-24-5 id=__codelineno-24-5 name=__codelineno-24-5></a>(gdb)
</span></code></pre></div><h3 id=3-4-disable-breakpoints>3-4. Disable breakpoints<a title="Permanent link" class=headerlink href=#3-4-disable-breakpoints>¶</a></h3><p>Use the disable command to disable the currently set breakpoint.<br> The argument must be a breakpoint number to be obtained with info breakpoints.<br> Disabled breakpoints will have an Enb of n. run execution will not stop at breakpoints.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-25-1><a href=#__codelineno-25-1 id=__codelineno-25-1 name=__codelineno-25-1></a>(gdb) disable 1
</span><span id=__span-25-2><a href=#__codelineno-25-2 id=__codelineno-25-2 name=__codelineno-25-2></a>(gdb) info breakpoints
</span><span id=__span-25-3><a href=#__codelineno-25-3 id=__codelineno-25-3 name=__codelineno-25-3></a>Num     Type           Disp Enb Address            What
</span><span id=__span-25-4><a href=#__codelineno-25-4 id=__codelineno-25-4 name=__codelineno-25-4></a>1       breakpoint     keep n   0x0000555555555129 in func1 at main.c:4
</span><span id=__span-25-5><a href=#__codelineno-25-5 id=__codelineno-25-5 name=__codelineno-25-5></a>        breakpoint already hit 1 time
</span><span id=__span-25-6><a href=#__codelineno-25-6 id=__codelineno-25-6 name=__codelineno-25-6></a>(gdb) run
</span><span id=__span-25-7><a href=#__codelineno-25-7 id=__codelineno-25-7 name=__codelineno-25-7></a>Starting program: /home/root/debug/testprog
</span></code></pre></div><h2 id=4-set-watchpoints>4. Set watchpoints<a title="Permanent link" class=headerlink href=#4-set-watchpoints>¶</a></h2><p>This chapter describes the watchpoints.<br> A watchpoint is a marker point at which the program is interrupted when a variable is accessed.<br> Watchpoints can be set on arbitrary variables, and debugging is possible after interrupting the program because of step command or print command.</p><h3 id=4-1-set-watchpoints-for-variable-writes>4-1. Set watchpoints for variable writes<a title="Permanent link" class=headerlink href=#4-1-set-watchpoints-for-variable-writes>¶</a></h3><p>If you want to interrupt the program when writing to a specific variable, use the watch command.<br> Since the variable to be specified must be in the current scope, it should be used in conjunction with breakpoints.</p><p>Set a breakpoint in the main function.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-26-1><a href=#__codelineno-26-1 id=__codelineno-26-1 name=__codelineno-26-1></a>(gdb) break main
</span><span id=__span-26-2><a href=#__codelineno-26-2 id=__codelineno-26-2 name=__codelineno-26-2></a>Breakpoint 1 at 0x114d: file main.c, line 11.
</span><span id=__span-26-3><a href=#__codelineno-26-3 id=__codelineno-26-3 name=__codelineno-26-3></a>(gdb) run
</span><span id=__span-26-4><a href=#__codelineno-26-4 id=__codelineno-26-4 name=__codelineno-26-4></a>Starting program: /home/root/debug/testprog
</span><span id=__span-26-5><a href=#__codelineno-26-5 id=__codelineno-26-5 name=__codelineno-26-5></a>
</span><span id=__span-26-6><a href=#__codelineno-26-6 id=__codelineno-26-6 name=__codelineno-26-6></a>Breakpoint 1, main (argc=21845, argv=0x0) at main.c:11
</span><span id=__span-26-7><a href=#__codelineno-26-7 id=__codelineno-26-7 name=__codelineno-26-7></a>11      {
</span></code></pre></div> Set watchpoints in the num variable. <div class="language-text highlight"><pre><span></span><code><span id=__span-27-1><a href=#__codelineno-27-1 id=__codelineno-27-1 name=__codelineno-27-1></a>(gdb) watch num
</span><span id=__span-27-2><a href=#__codelineno-27-2 id=__codelineno-27-2 name=__codelineno-27-2></a>Hardware watchpoint 2: num
</span><span id=__span-27-3><a href=#__codelineno-27-3 id=__codelineno-27-3 name=__codelineno-27-3></a>(gdb) continue
</span><span id=__span-27-4><a href=#__codelineno-27-4 id=__codelineno-27-4 name=__codelineno-27-4></a>Continuing.
</span></code></pre></div> Stops when writing num variables. <div class="language-text highlight"><pre><span></span><code><span id=__span-28-1><a href=#__codelineno-28-1 id=__codelineno-28-1 name=__codelineno-28-1></a>Hardware watchpoint 2: num
</span><span id=__span-28-2><a href=#__codelineno-28-2 id=__codelineno-28-2 name=__codelineno-28-2></a>
</span><span id=__span-28-3><a href=#__codelineno-28-3 id=__codelineno-28-3 name=__codelineno-28-3></a>Old value = 0
</span><span id=__span-28-4><a href=#__codelineno-28-4 id=__codelineno-28-4 name=__codelineno-28-4></a>New value = 1
</span><span id=__span-28-5><a href=#__codelineno-28-5 id=__codelineno-28-5 name=__codelineno-28-5></a>main (argc=1, argv=0x7fffffffe3a8) at main.c:14
</span><span id=__span-28-6><a href=#__codelineno-28-6 id=__codelineno-28-6 name=__codelineno-28-6></a>14          if(num > 5000){
</span><span id=__span-28-7><a href=#__codelineno-28-7 id=__codelineno-28-7 name=__codelineno-28-7></a>(gdb)
</span></code></pre></div><h3 id=4-2-set-watchpoints-for-variable-reads>4-2. Set watchpoints for variable reads<a title="Permanent link" class=headerlink href=#4-2-set-watchpoints-for-variable-reads>¶</a></h3><p>If you want to interrupt the program when a specific variable is read, use the rwatch command.<br> Usage notes are the same as for the watch command.</p><p>Set a breakpoint in the func1 function.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-29-1><a href=#__codelineno-29-1 id=__codelineno-29-1 name=__codelineno-29-1></a>(gdb) break func1
</span><span id=__span-29-2><a href=#__codelineno-29-2 id=__codelineno-29-2 name=__codelineno-29-2></a>Breakpoint 1 at 0x1129: file main.c, line 4.
</span><span id=__span-29-3><a href=#__codelineno-29-3 id=__codelineno-29-3 name=__codelineno-29-3></a>(gdb) run
</span><span id=__span-29-4><a href=#__codelineno-29-4 id=__codelineno-29-4 name=__codelineno-29-4></a>Starting program: /home/root/debug/testprog
</span><span id=__span-29-5><a href=#__codelineno-29-5 id=__codelineno-29-5 name=__codelineno-29-5></a>
</span><span id=__span-29-6><a href=#__codelineno-29-6 id=__codelineno-29-6 name=__codelineno-29-6></a>Breakpoint 1, func1 (num=21845) at main.c:4
</span><span id=__span-29-7><a href=#__codelineno-29-7 id=__codelineno-29-7 name=__codelineno-29-7></a>4       {
</span></code></pre></div> Stops when sum variable is read. <div class="language-text highlight"><pre><span></span><code><span id=__span-30-1><a href=#__codelineno-30-1 id=__codelineno-30-1 name=__codelineno-30-1></a>(gdb) rwatch sum
</span><span id=__span-30-2><a href=#__codelineno-30-2 id=__codelineno-30-2 name=__codelineno-30-2></a>Hardware read watchpoint 2: sum
</span><span id=__span-30-3><a href=#__codelineno-30-3 id=__codelineno-30-3 name=__codelineno-30-3></a>(gdb) continue
</span><span id=__span-30-4><a href=#__codelineno-30-4 id=__codelineno-30-4 name=__codelineno-30-4></a>Continuing.
</span><span id=__span-30-5><a href=#__codelineno-30-5 id=__codelineno-30-5 name=__codelineno-30-5></a>
</span><span id=__span-30-6><a href=#__codelineno-30-6 id=__codelineno-30-6 name=__codelineno-30-6></a>Hardware read watchpoint 2: sum
</span><span id=__span-30-7><a href=#__codelineno-30-7 id=__codelineno-30-7 name=__codelineno-30-7></a>
</span><span id=__span-30-8><a href=#__codelineno-30-8 id=__codelineno-30-8 name=__codelineno-30-8></a>Value = 0
</span><span id=__span-30-9><a href=#__codelineno-30-9 id=__codelineno-30-9 name=__codelineno-30-9></a>0x000055555555513a in func1 (num=1) at main.c:6
</span><span id=__span-30-10><a href=#__codelineno-30-10 id=__codelineno-30-10 name=__codelineno-30-10></a>6         sum += num;
</span><span id=__span-30-11><a href=#__codelineno-30-11 id=__codelineno-30-11 name=__codelineno-30-11></a>(gdb)
</span></code></pre></div><h3 id=4-3-set-watchpoints-for-reading-and-writing-variables>4-3. Set watchpoints for reading and writing variables<a title="Permanent link" class=headerlink href=#4-3-set-watchpoints-for-reading-and-writing-variables>¶</a></h3><p>If you want to interrupt the program when either reading or writing a specific variable occurs, use the awatch command.<br> Usage notes are the same as for the watch command.</p><p>Set a breakpoint in the func1 function.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-31-1><a href=#__codelineno-31-1 id=__codelineno-31-1 name=__codelineno-31-1></a>(gdb) break func1
</span><span id=__span-31-2><a href=#__codelineno-31-2 id=__codelineno-31-2 name=__codelineno-31-2></a>Breakpoint 1 at 0x1129: file main.c, line 4.
</span><span id=__span-31-3><a href=#__codelineno-31-3 id=__codelineno-31-3 name=__codelineno-31-3></a>(gdb) run
</span><span id=__span-31-4><a href=#__codelineno-31-4 id=__codelineno-31-4 name=__codelineno-31-4></a>Starting program: /home/root/debug/testprog
</span><span id=__span-31-5><a href=#__codelineno-31-5 id=__codelineno-31-5 name=__codelineno-31-5></a>
</span><span id=__span-31-6><a href=#__codelineno-31-6 id=__codelineno-31-6 name=__codelineno-31-6></a>Breakpoint 1, func1 (num=21845) at main.c:4
</span><span id=__span-31-7><a href=#__codelineno-31-7 id=__codelineno-31-7 name=__codelineno-31-7></a>warning: Source file is more recent than executable.
</span><span id=__span-31-8><a href=#__codelineno-31-8 id=__codelineno-31-8 name=__codelineno-31-8></a>4       {
</span></code></pre></div> Stops when reading/writing sum variables. <div class="language-text highlight"><pre><span></span><code><span id=__span-32-1><a href=#__codelineno-32-1 id=__codelineno-32-1 name=__codelineno-32-1></a>(gdb) awatch sum
</span><span id=__span-32-2><a href=#__codelineno-32-2 id=__codelineno-32-2 name=__codelineno-32-2></a>Hardware access (read/write) watchpoint 2: sum
</span><span id=__span-32-3><a href=#__codelineno-32-3 id=__codelineno-32-3 name=__codelineno-32-3></a>(gdb) continue
</span><span id=__span-32-4><a href=#__codelineno-32-4 id=__codelineno-32-4 name=__codelineno-32-4></a>Continuing.
</span></code></pre></div> Stop at readout. <div class="language-text highlight"><pre><span></span><code><span id=__span-33-1><a href=#__codelineno-33-1 id=__codelineno-33-1 name=__codelineno-33-1></a>Hardware access (read/write) watchpoint 2: sum
</span><span id=__span-33-2><a href=#__codelineno-33-2 id=__codelineno-33-2 name=__codelineno-33-2></a>
</span><span id=__span-33-3><a href=#__codelineno-33-3 id=__codelineno-33-3 name=__codelineno-33-3></a>Value = 0
</span><span id=__span-33-4><a href=#__codelineno-33-4 id=__codelineno-33-4 name=__codelineno-33-4></a>0x000055555555513a in func1 (num=1) at main.c:6
</span><span id=__span-33-5><a href=#__codelineno-33-5 id=__codelineno-33-5 name=__codelineno-33-5></a>6         sum += num;
</span><span id=__span-33-6><a href=#__codelineno-33-6 id=__codelineno-33-6 name=__codelineno-33-6></a>(gdb) continue
</span><span id=__span-33-7><a href=#__codelineno-33-7 id=__codelineno-33-7 name=__codelineno-33-7></a>Continuing.
</span></code></pre></div> Stop when writing. <div class="language-text highlight"><pre><span></span><code><span id=__span-34-1><a href=#__codelineno-34-1 id=__codelineno-34-1 name=__codelineno-34-1></a>Hardware access (read/write) watchpoint 2: sum
</span><span id=__span-34-2><a href=#__codelineno-34-2 id=__codelineno-34-2 name=__codelineno-34-2></a>
</span><span id=__span-34-3><a href=#__codelineno-34-3 id=__codelineno-34-3 name=__codelineno-34-3></a>Old value = 0
</span><span id=__span-34-4><a href=#__codelineno-34-4 id=__codelineno-34-4 name=__codelineno-34-4></a>New value = 1
</span><span id=__span-34-5><a href=#__codelineno-34-5 id=__codelineno-34-5 name=__codelineno-34-5></a>func1 (num=1) at main.c:7
</span><span id=__span-34-6><a href=#__codelineno-34-6 id=__codelineno-34-6 name=__codelineno-34-6></a>7         return sum;
</span><span id=__span-34-7><a href=#__codelineno-34-7 id=__codelineno-34-7 name=__codelineno-34-7></a>(gdb)
</span></code></pre></div><h3 id=4-4-obtain-a-list-of-watchpoints>4-4. Obtain a list of watchpoints<a title="Permanent link" class=headerlink href=#4-4-obtain-a-list-of-watchpoints>¶</a></h3><p>Use the info breakpoints command to display a list of all currently set watchpoints.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-35-1><a href=#__codelineno-35-1 id=__codelineno-35-1 name=__codelineno-35-1></a>(gdb) info breakpoints
</span><span id=__span-35-2><a href=#__codelineno-35-2 id=__codelineno-35-2 name=__codelineno-35-2></a>Num     Type           Disp Enb Address            What
</span><span id=__span-35-3><a href=#__codelineno-35-3 id=__codelineno-35-3 name=__codelineno-35-3></a>1       breakpoint     keep y   0x0000555555555129 in func1 at main.c:4
</span><span id=__span-35-4><a href=#__codelineno-35-4 id=__codelineno-35-4 name=__codelineno-35-4></a>        breakpoint already hit 1 time
</span><span id=__span-35-5><a href=#__codelineno-35-5 id=__codelineno-35-5 name=__codelineno-35-5></a>2       acc watchpoint keep y                      sum
</span><span id=__span-35-6><a href=#__codelineno-35-6 id=__codelineno-35-6 name=__codelineno-35-6></a>        breakpoint already hit 2 times
</span><span id=__span-35-7><a href=#__codelineno-35-7 id=__codelineno-35-7 name=__codelineno-35-7></a>(gdb)
</span></code></pre></div><h3 id=4-5-disable-watchpoints>4-5. Disable watchpoints<a title="Permanent link" class=headerlink href=#4-5-disable-watchpoints>¶</a></h3><p>Use the disable command to disable the currently set watchpoints.<br> The argument must be a watchpoint number to be obtained with info breakpoints.<br> Disabled watchpoints will have an Enb of n. run execution will not stop at the watchpoint.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-36-1><a href=#__codelineno-36-1 id=__codelineno-36-1 name=__codelineno-36-1></a>(gdb) disable 2
</span><span id=__span-36-2><a href=#__codelineno-36-2 id=__codelineno-36-2 name=__codelineno-36-2></a>(gdb) info breakpoints
</span><span id=__span-36-3><a href=#__codelineno-36-3 id=__codelineno-36-3 name=__codelineno-36-3></a>Num     Type           Disp Enb Address            What
</span><span id=__span-36-4><a href=#__codelineno-36-4 id=__codelineno-36-4 name=__codelineno-36-4></a>1       breakpoint     keep y   0x0000555555555129 in func1 at main.c:4
</span><span id=__span-36-5><a href=#__codelineno-36-5 id=__codelineno-36-5 name=__codelineno-36-5></a>        breakpoint already hit 1 time
</span><span id=__span-36-6><a href=#__codelineno-36-6 id=__codelineno-36-6 name=__codelineno-36-6></a>2       acc watchpoint keep n                      sum
</span><span id=__span-36-7><a href=#__codelineno-36-7 id=__codelineno-36-7 name=__codelineno-36-7></a>        breakpoint already hit 2 times
</span><span id=__span-36-8><a href=#__codelineno-36-8 id=__codelineno-36-8 name=__codelineno-36-8></a>(gdb) continue
</span><span id=__span-36-9><a href=#__codelineno-36-9 id=__codelineno-36-9 name=__codelineno-36-9></a>Continuing.
</span><span id=__span-36-10><a href=#__codelineno-36-10 id=__codelineno-36-10 name=__codelineno-36-10></a>
</span><span id=__span-36-11><a href=#__codelineno-36-11 id=__codelineno-36-11 name=__codelineno-36-11></a>Breakpoint 1, func1 (num=1) at main.c:4
</span><span id=__span-36-12><a href=#__codelineno-36-12 id=__codelineno-36-12 name=__codelineno-36-12></a>4       {
</span><span id=__span-36-13><a href=#__codelineno-36-13 id=__codelineno-36-13 name=__codelineno-36-13></a>(gdb) continue
</span><span id=__span-36-14><a href=#__codelineno-36-14 id=__codelineno-36-14 name=__codelineno-36-14></a>Continuing.
</span><span id=__span-36-15><a href=#__codelineno-36-15 id=__codelineno-36-15 name=__codelineno-36-15></a>
</span><span id=__span-36-16><a href=#__codelineno-36-16 id=__codelineno-36-16 name=__codelineno-36-16></a>Breakpoint 1, func1 (num=1) at main.c:4
</span><span id=__span-36-17><a href=#__codelineno-36-17 id=__codelineno-36-17 name=__codelineno-36-17></a>4       {
</span><span id=__span-36-18><a href=#__codelineno-36-18 id=__codelineno-36-18 name=__codelineno-36-18></a>(gdb)
</span></code></pre></div><h2 id=5-execute-call-stack>5. Execute call stack<a title="Permanent link" class=headerlink href=#5-execute-call-stack>¶</a></h2><p>This chapter explains how to analyze stacked frames.<br> The execution status of the function can be checked by analyzing the stack frame.</p><h3 id=5-1-obtain-a-backtrace-of-the-function>5-1. Obtain a backtrace of the function<a title="Permanent link" class=headerlink href=#5-1-obtain-a-backtrace-of-the-function>¶</a></h3><p>Use the backtrace command to obtain a backtrace, which is information about the caller of a function.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-37-1><a href=#__codelineno-37-1 id=__codelineno-37-1 name=__codelineno-37-1></a>(gdb) backtrace
</span><span id=__span-37-2><a href=#__codelineno-37-2 id=__codelineno-37-2 name=__codelineno-37-2></a>#0  func1 (num=1) at main.c:4
</span><span id=__span-37-3><a href=#__codelineno-37-3 id=__codelineno-37-3 name=__codelineno-37-3></a>#1  0x000055555555517a in main (argc=1, argv=0x7fffffffe3a8) at main.c:17
</span><span id=__span-37-4><a href=#__codelineno-37-4 id=__codelineno-37-4 name=__codelineno-37-4></a>(gdb)
</span></code></pre></div><h3 id=5-2-change-the-stack-frame>5-2. Change the stack frame<a title="Permanent link" class=headerlink href=#5-2-change-the-stack-frame>¶</a></h3><p>To change the stack frame, use the frame command.<br> Get the frame number with the backtrace command and use it as an argument.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-38-1><a href=#__codelineno-38-1 id=__codelineno-38-1 name=__codelineno-38-1></a>(gdb) frame 1
</span><span id=__span-38-2><a href=#__codelineno-38-2 id=__codelineno-38-2 name=__codelineno-38-2></a>#1  0x000055555555517a in main (argc=1, argv=0x7fffffffe3a8) at main.c:17
</span><span id=__span-38-3><a href=#__codelineno-38-3 id=__codelineno-38-3 name=__codelineno-38-3></a>17          func1(num);
</span><span id=__span-38-4><a href=#__codelineno-38-4 id=__codelineno-38-4 name=__codelineno-38-4></a>(gdb)
</span></code></pre></div><h3 id=5-3-analyze-stack-frames>5-3. Analyze stack frames<a title="Permanent link" class=headerlink href=#5-3-analyze-stack-frames>¶</a></h3><p>Three commands to check the contents of the current stack frame are described.<br> The info frame command outputs detailed information such as register values for the current stack frame.</p><div class="language-text highlight"><pre><span></span><code><span id=__span-39-1><a href=#__codelineno-39-1 id=__codelineno-39-1 name=__codelineno-39-1></a>(gdb) info frame
</span><span id=__span-39-2><a href=#__codelineno-39-2 id=__codelineno-39-2 name=__codelineno-39-2></a>Stack level 1, frame at 0x7fffffffe2c0:
</span><span id=__span-39-3><a href=#__codelineno-39-3 id=__codelineno-39-3 name=__codelineno-39-3></a> rip = 0x55555555517a in main (main.c:17); saved rip = 0x7ffff7de4083
</span><span id=__span-39-4><a href=#__codelineno-39-4 id=__codelineno-39-4 name=__codelineno-39-4></a> caller of frame at 0x7fffffffe290
</span><span id=__span-39-5><a href=#__codelineno-39-5 id=__codelineno-39-5 name=__codelineno-39-5></a> source language c.
</span><span id=__span-39-6><a href=#__codelineno-39-6 id=__codelineno-39-6 name=__codelineno-39-6></a> Arglist at 0x7fffffffe288, args: argc=1, argv=0x7fffffffe3a8
</span><span id=__span-39-7><a href=#__codelineno-39-7 id=__codelineno-39-7 name=__codelineno-39-7></a> Locals at 0x7fffffffe288, Previous frame's sp is 0x7fffffffe2c0
</span><span id=__span-39-8><a href=#__codelineno-39-8 id=__codelineno-39-8 name=__codelineno-39-8></a> Saved registers:
</span><span id=__span-39-9><a href=#__codelineno-39-9 id=__codelineno-39-9 name=__codelineno-39-9></a>  rbp at 0x7fffffffe2b0, rip at 0x7fffffffe2b8
</span><span id=__span-39-10><a href=#__codelineno-39-10 id=__codelineno-39-10 name=__codelineno-39-10></a>(gdb)
</span></code></pre></div> The info locals command displays a list of local variables and their values for the current stack frame. <div class="language-text highlight"><pre><span></span><code><span id=__span-40-1><a href=#__codelineno-40-1 id=__codelineno-40-1 name=__codelineno-40-1></a>(gdb) info locals
</span><span id=__span-40-2><a href=#__codelineno-40-2 id=__codelineno-40-2 name=__codelineno-40-2></a>num = 1
</span><span id=__span-40-3><a href=#__codelineno-40-3 id=__codelineno-40-3 name=__codelineno-40-3></a>(gdb)
</span></code></pre></div> The info args command displays a list of arguments for the current stack frame. <div class="language-text highlight"><pre><span></span><code><span id=__span-41-1><a href=#__codelineno-41-1 id=__codelineno-41-1 name=__codelineno-41-1></a>(gdb) info args
</span><span id=__span-41-2><a href=#__codelineno-41-2 id=__codelineno-41-2 name=__codelineno-41-2></a>argc = 1
</span><span id=__span-41-3><a href=#__codelineno-41-3 id=__codelineno-41-3 name=__codelineno-41-3></a>argv = 0x7fffffffe3a8
</span><span id=__span-41-4><a href=#__codelineno-41-4 id=__codelineno-41-4 name=__codelineno-41-4></a>(gdb)
</span></code></pre></div><h2 id=6-examples>6. Examples<a title="Permanent link" class=headerlink href=#6-examples>¶</a></h2><h3 id=6-1-example-1-of-infinite-loop-analysis>6-1. Example 1 of infinite loop analysis<a title="Permanent link" class=headerlink href=#6-1-example-1-of-infinite-loop-analysis>¶</a></h3><p>The source code should be the following.<br> The value of num is added and the program terminates when it exceeds 5000.</p><p></p><div class="language-bash highlight"><span class=filename>main.c</span><pre><span></span><code><span id=__span-42-1><a href=#__codelineno-42-1 id=__codelineno-42-1 name=__codelineno-42-1></a><span class=c1>#include &lt;stdio.h></span>
</span><span id=__span-42-2><a href=#__codelineno-42-2 id=__codelineno-42-2 name=__codelineno-42-2></a>
</span><span id=__span-42-3><a href=#__codelineno-42-3 id=__codelineno-42-3 name=__codelineno-42-3></a>int<span class=w> </span>func1<span class=o>(</span>int<span class=w> </span>num<span class=o>)</span>
</span><span id=__span-42-4><a href=#__codelineno-42-4 id=__codelineno-42-4 name=__codelineno-42-4></a><span class=o>{</span>
</span><span id=__span-42-5><a href=#__codelineno-42-5 id=__codelineno-42-5 name=__codelineno-42-5></a><span class=w>   </span>static<span class=w> </span>int<span class=w> </span><span class=nv>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-42-6><a href=#__codelineno-42-6 id=__codelineno-42-6 name=__codelineno-42-6></a><span class=w>   </span><span class=nv>sum</span><span class=w> </span><span class=o>+=</span><span class=w> </span>num<span class=p>;</span>
</span><span id=__span-42-7><a href=#__codelineno-42-7 id=__codelineno-42-7 name=__codelineno-42-7></a><span class=w>   </span><span class=k>return</span><span class=w> </span>sum<span class=p>;</span>
</span><span id=__span-42-8><a href=#__codelineno-42-8 id=__codelineno-42-8 name=__codelineno-42-8></a><span class=o>}</span>
</span><span id=__span-42-9><a href=#__codelineno-42-9 id=__codelineno-42-9 name=__codelineno-42-9></a>
</span><span id=__span-42-10><a href=#__codelineno-42-10 id=__codelineno-42-10 name=__codelineno-42-10></a>int<span class=w> </span>main<span class=o>(</span>int<span class=w> </span>argc,<span class=w> </span>char**<span class=w> </span>argv<span class=o>)</span>
</span><span id=__span-42-11><a href=#__codelineno-42-11 id=__codelineno-42-11 name=__codelineno-42-11></a><span class=o>{</span>
</span><span id=__span-42-12><a href=#__codelineno-42-12 id=__codelineno-42-12 name=__codelineno-42-12></a><span class=w>   </span>int<span class=w> </span>num<span class=p>;</span>
</span><span id=__span-42-13><a href=#__codelineno-42-13 id=__codelineno-42-13 name=__codelineno-42-13></a><span class=w>   </span><span class=nv>num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1</span><span class=p>;</span>
</span><span id=__span-42-14><a href=#__codelineno-42-14 id=__codelineno-42-14 name=__codelineno-42-14></a><span class=w>   </span><span class=k>while</span><span class=o>(</span><span class=m>1</span><span class=o>){</span>
</span><span id=__span-42-15><a href=#__codelineno-42-15 id=__codelineno-42-15 name=__codelineno-42-15></a><span class=w>      </span><span class=k>if</span><span class=o>(</span>num<span class=w> </span>><span class=w> </span><span class=m>5000</span><span class=o>){</span>
</span><span id=__span-42-16><a href=#__codelineno-42-16 id=__codelineno-42-16 name=__codelineno-42-16></a><span class=w>         </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-42-17><a href=#__codelineno-42-17 id=__codelineno-42-17 name=__codelineno-42-17></a><span class=w>      </span><span class=o>}</span>
</span><span id=__span-42-18><a href=#__codelineno-42-18 id=__codelineno-42-18 name=__codelineno-42-18></a><span class=w>      </span>func1<span class=o>(</span>num<span class=o>)</span><span class=p>;</span>
</span><span id=__span-42-19><a href=#__codelineno-42-19 id=__codelineno-42-19 name=__codelineno-42-19></a><span class=w>   </span><span class=o>}</span>
</span><span id=__span-42-20><a href=#__codelineno-42-20 id=__codelineno-42-20 name=__codelineno-42-20></a><span class=w>   </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-42-21><a href=#__codelineno-42-21 id=__codelineno-42-21 name=__codelineno-42-21></a><span class=o>}</span>
</span></code></pre></div> Compile the program with the -g option.<br> When the program is executed, it falls into an infinite loop. <div class="language-text highlight"><pre><span></span><code><span id=__span-43-1><a href=#__codelineno-43-1 id=__codelineno-43-1 name=__codelineno-43-1></a># ./testprog
</span></code></pre></div> Debugging with gdb. <div class="language-text highlight"><pre><span></span><code><span id=__span-44-1><a href=#__codelineno-44-1 id=__codelineno-44-1 name=__codelineno-44-1></a># gdb testprog
</span><span id=__span-44-2><a href=#__codelineno-44-2 id=__codelineno-44-2 name=__codelineno-44-2></a>...
</span><span id=__span-44-3><a href=#__codelineno-44-3 id=__codelineno-44-3 name=__codelineno-44-3></a>For help, type "help".
</span><span id=__span-44-4><a href=#__codelineno-44-4 id=__codelineno-44-4 name=__codelineno-44-4></a>Type "apropos word" to search for commands related to "word"...
</span><span id=__span-44-5><a href=#__codelineno-44-5 id=__codelineno-44-5 name=__codelineno-44-5></a>Reading symbols from testprog...
</span><span id=__span-44-6><a href=#__codelineno-44-6 id=__codelineno-44-6 name=__codelineno-44-6></a>(gdb) run
</span><span id=__span-44-7><a href=#__codelineno-44-7 id=__codelineno-44-7 name=__codelineno-44-7></a>Starting program: /home/root/debug/testprog
</span></code></pre></div> The program is interrupted by Ctrl+C because it falls into an infinite loop. <div class="language-text highlight"><pre><span></span><code><span id=__span-45-1><a href=#__codelineno-45-1 id=__codelineno-45-1 name=__codelineno-45-1></a>^C
</span><span id=__span-45-2><a href=#__codelineno-45-2 id=__codelineno-45-2 name=__codelineno-45-2></a>Program received signal SIGINT, Interrupt.
</span><span id=__span-45-3><a href=#__codelineno-45-3 id=__codelineno-45-3 name=__codelineno-45-3></a>func1 (num=1) at main.c:8
</span><span id=__span-45-4><a href=#__codelineno-45-4 id=__codelineno-45-4 name=__codelineno-45-4></a>8       }
</span><span id=__span-45-5><a href=#__codelineno-45-5 id=__codelineno-45-5 name=__codelineno-45-5></a>(gdb)
</span></code></pre></div> Advance the program with the next command. <div class="language-text highlight"><pre><span></span><code><span id=__span-46-1><a href=#__codelineno-46-1 id=__codelineno-46-1 name=__codelineno-46-1></a>(gdb) next
</span><span id=__span-46-2><a href=#__codelineno-46-2 id=__codelineno-46-2 name=__codelineno-46-2></a>main (argc=1, argv=0x7fffffffe3a8) at main.c:15
</span><span id=__span-46-3><a href=#__codelineno-46-3 id=__codelineno-46-3 name=__codelineno-46-3></a>15          if(num > 5000){
</span><span id=__span-46-4><a href=#__codelineno-46-4 id=__codelineno-46-4 name=__codelineno-46-4></a>(gdb) next
</span><span id=__span-46-5><a href=#__codelineno-46-5 id=__codelineno-46-5 name=__codelineno-46-5></a>18          func1(num);
</span><span id=__span-46-6><a href=#__codelineno-46-6 id=__codelineno-46-6 name=__codelineno-46-6></a>(gdb) next
</span><span id=__span-46-7><a href=#__codelineno-46-7 id=__codelineno-46-7 name=__codelineno-46-7></a>15          if(num > 5000){
</span><span id=__span-46-8><a href=#__codelineno-46-8 id=__codelineno-46-8 name=__codelineno-46-8></a>(gdb) next
</span><span id=__span-46-9><a href=#__codelineno-46-9 id=__codelineno-46-9 name=__codelineno-46-9></a>18          func1(num);
</span><span id=__span-46-10><a href=#__codelineno-46-10 id=__codelineno-46-10 name=__codelineno-46-10></a>(gdb) next
</span><span id=__span-46-11><a href=#__codelineno-46-11 id=__codelineno-46-11 name=__codelineno-46-11></a>15          if(num > 5000){
</span><span id=__span-46-12><a href=#__codelineno-46-12 id=__codelineno-46-12 name=__codelineno-46-12></a>(gdb)
</span></code></pre></div> The same pattern is repeated, and this code does not update the value of num.<br> Since the condition for exiting the loop is that num must exceed 5000, the fact that num did not change was the cause of the infinite loop. <div class="language-text highlight"><pre><span></span><code><span id=__span-47-1><a href=#__codelineno-47-1 id=__codelineno-47-1 name=__codelineno-47-1></a>      if(num > 5000){
</span><span id=__span-47-2><a href=#__codelineno-47-2 id=__codelineno-47-2 name=__codelineno-47-2></a>         break;
</span><span id=__span-47-3><a href=#__codelineno-47-3 id=__codelineno-47-3 name=__codelineno-47-3></a>      }
</span></code></pre></div> The func1 function adds the value of num to sum and returns it, so the expected behavior is to receive that value in the main function. <div class="language-text highlight"><pre><span></span><code><span id=__span-48-1><a href=#__codelineno-48-1 id=__codelineno-48-1 name=__codelineno-48-1></a>int func1(int num)
</span><span id=__span-48-2><a href=#__codelineno-48-2 id=__codelineno-48-2 name=__codelineno-48-2></a>{
</span><span id=__span-48-3><a href=#__codelineno-48-3 id=__codelineno-48-3 name=__codelineno-48-3></a>   static int sum = 0;
</span><span id=__span-48-4><a href=#__codelineno-48-4 id=__codelineno-48-4 name=__codelineno-48-4></a>   sum += num;
</span><span id=__span-48-5><a href=#__codelineno-48-5 id=__codelineno-48-5 name=__codelineno-48-5></a>   return sum;
</span><span id=__span-48-6><a href=#__codelineno-48-6 id=__codelineno-48-6 name=__codelineno-48-6></a>}
</span></code></pre></div><div class="language-text highlight"><pre><span></span><code><span id=__span-49-1><a href=#__codelineno-49-1 id=__codelineno-49-1 name=__codelineno-49-1></a>while(1){
</span><span id=__span-49-2><a href=#__codelineno-49-2 id=__codelineno-49-2 name=__codelineno-49-2></a>   if(num > 5000){
</span><span id=__span-49-3><a href=#__codelineno-49-3 id=__codelineno-49-3 name=__codelineno-49-3></a>      break;
</span><span id=__span-49-4><a href=#__codelineno-49-4 id=__codelineno-49-4 name=__codelineno-49-4></a>   }
</span><span id=__span-49-5><a href=#__codelineno-49-5 id=__codelineno-49-5 name=__codelineno-49-5></a>   num = func1(num);
</span><span id=__span-49-6><a href=#__codelineno-49-6 id=__codelineno-49-6 name=__codelineno-49-6></a>}
</span></code></pre></div><h3 id=6-2-example-2-of-infinite-loop-analysis>6-2. Example 2 of infinite loop analysis<a title="Permanent link" class=headerlink href=#6-2-example-2-of-infinite-loop-analysis>¶</a></h3><p>The source code should be the following.<br> This program stores 300 values calculated from a counter in an array of ints.</p><p></p><div class="language-bash highlight"><span class=filename>main.c</span><pre><span></span><code><span id=__span-50-1><a href=#__codelineno-50-1 id=__codelineno-50-1 name=__codelineno-50-1></a><span class=c1>#include &lt;stdio.h></span>
</span><span id=__span-50-2><a href=#__codelineno-50-2 id=__codelineno-50-2 name=__codelineno-50-2></a>
</span><span id=__span-50-3><a href=#__codelineno-50-3 id=__codelineno-50-3 name=__codelineno-50-3></a><span class=c1>#define DATANUM 300</span>
</span><span id=__span-50-4><a href=#__codelineno-50-4 id=__codelineno-50-4 name=__codelineno-50-4></a>
</span><span id=__span-50-5><a href=#__codelineno-50-5 id=__codelineno-50-5 name=__codelineno-50-5></a>int<span class=w> </span>getdata<span class=o>(</span>unsigned<span class=w> </span>char<span class=w> </span>cnt<span class=o>)</span>
</span><span id=__span-50-6><a href=#__codelineno-50-6 id=__codelineno-50-6 name=__codelineno-50-6></a><span class=o>{</span>
</span><span id=__span-50-7><a href=#__codelineno-50-7 id=__codelineno-50-7 name=__codelineno-50-7></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=o>(</span>int<span class=o>)</span>cnt*<span class=o>(</span>cnt+cnt<span class=o>)</span><span class=p>;</span>
</span><span id=__span-50-8><a href=#__codelineno-50-8 id=__codelineno-50-8 name=__codelineno-50-8></a><span class=o>}</span>
</span><span id=__span-50-9><a href=#__codelineno-50-9 id=__codelineno-50-9 name=__codelineno-50-9></a>
</span><span id=__span-50-10><a href=#__codelineno-50-10 id=__codelineno-50-10 name=__codelineno-50-10></a>int<span class=w> </span>main<span class=o>(</span>int<span class=w> </span>argc,<span class=w> </span>char**<span class=w> </span>argv<span class=o>)</span>
</span><span id=__span-50-11><a href=#__codelineno-50-11 id=__codelineno-50-11 name=__codelineno-50-11></a><span class=o>{</span>
</span><span id=__span-50-12><a href=#__codelineno-50-12 id=__codelineno-50-12 name=__codelineno-50-12></a><span class=w>  </span>unsigned<span class=w> </span>char<span class=w> </span><span class=nv>cnt</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-50-13><a href=#__codelineno-50-13 id=__codelineno-50-13 name=__codelineno-50-13></a><span class=w>  </span>int<span class=w> </span>data<span class=o>[</span>DATANUM<span class=o>]</span><span class=p>;</span>
</span><span id=__span-50-14><a href=#__codelineno-50-14 id=__codelineno-50-14 name=__codelineno-50-14></a>
</span><span id=__span-50-15><a href=#__codelineno-50-15 id=__codelineno-50-15 name=__codelineno-50-15></a><span class=w>  </span><span class=k>for</span><span class=o>(</span><span class=nv>cnt</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0</span><span class=p>;</span>cnt<span class=w> </span>&lt;<span class=w> </span>DATANUM<span class=p>;</span>cnt++<span class=o>){</span>
</span><span id=__span-50-16><a href=#__codelineno-50-16 id=__codelineno-50-16 name=__codelineno-50-16></a><span class=w>    </span>data<span class=o>[</span>cnt<span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span>getdata<span class=o>(</span>cnt<span class=o>)</span><span class=p>;</span>
</span><span id=__span-50-17><a href=#__codelineno-50-17 id=__codelineno-50-17 name=__codelineno-50-17></a><span class=w>  </span><span class=o>}</span>
</span><span id=__span-50-18><a href=#__codelineno-50-18 id=__codelineno-50-18 name=__codelineno-50-18></a>
</span><span id=__span-50-19><a href=#__codelineno-50-19 id=__codelineno-50-19 name=__codelineno-50-19></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-50-20><a href=#__codelineno-50-20 id=__codelineno-50-20 name=__codelineno-50-20></a><span class=o>}</span>
</span></code></pre></div> Compile the program with the -g option. <br> When the program is executed, it falls into an infinite loop. <div class="language-text highlight"><pre><span></span><code><span id=__span-51-1><a href=#__codelineno-51-1 id=__codelineno-51-1 name=__codelineno-51-1></a># ./testprog
</span></code></pre></div> Debugging with gdb. <div class="language-text highlight"><pre><span></span><code><span id=__span-52-1><a href=#__codelineno-52-1 id=__codelineno-52-1 name=__codelineno-52-1></a># gdb testprog
</span><span id=__span-52-2><a href=#__codelineno-52-2 id=__codelineno-52-2 name=__codelineno-52-2></a>...
</span><span id=__span-52-3><a href=#__codelineno-52-3 id=__codelineno-52-3 name=__codelineno-52-3></a>For help, type "help".
</span><span id=__span-52-4><a href=#__codelineno-52-4 id=__codelineno-52-4 name=__codelineno-52-4></a>Type "apropos word" to search for commands related to "word"...
</span><span id=__span-52-5><a href=#__codelineno-52-5 id=__codelineno-52-5 name=__codelineno-52-5></a>Reading symbols from testprog...
</span><span id=__span-52-6><a href=#__codelineno-52-6 id=__codelineno-52-6 name=__codelineno-52-6></a>(gdb) run
</span><span id=__span-52-7><a href=#__codelineno-52-7 id=__codelineno-52-7 name=__codelineno-52-7></a>Starting program: /home/root/debug/testprog
</span></code></pre></div> The program is interrupted by Ctrl+C because it falls into an infinite loop. <div class="language-text highlight"><pre><span></span><code><span id=__span-53-1><a href=#__codelineno-53-1 id=__codelineno-53-1 name=__codelineno-53-1></a>^C
</span><span id=__span-53-2><a href=#__codelineno-53-2 id=__codelineno-53-2 name=__codelineno-53-2></a>Program received signal SIGINT, Interrupt.
</span><span id=__span-53-3><a href=#__codelineno-53-3 id=__codelineno-53-3 name=__codelineno-53-3></a>getdata (cnt=106 'j') at main3.c:6
</span><span id=__span-53-4><a href=#__codelineno-53-4 id=__codelineno-53-4 name=__codelineno-53-4></a>6       {
</span><span id=__span-53-5><a href=#__codelineno-53-5 id=__codelineno-53-5 name=__codelineno-53-5></a>(gdb)
</span></code></pre></div> Since the loop does not end, we confirmed that if we advance the program with the step command until cnt reaches 300,<br> which is the intended end condition, cnt returns to 0 in the middle of the loop.<br><div class="language-text highlight"><pre><span></span><code><span id=__span-54-1><a href=#__codelineno-54-1 id=__codelineno-54-1 name=__codelineno-54-1></a>(gdb)step
</span><span id=__span-54-2><a href=#__codelineno-54-2 id=__codelineno-54-2 name=__codelineno-54-2></a>getdata (cnt=255 '\377') at main3.c:6
</span><span id=__span-54-3><a href=#__codelineno-54-3 id=__codelineno-54-3 name=__codelineno-54-3></a>6       {
</span><span id=__span-54-4><a href=#__codelineno-54-4 id=__codelineno-54-4 name=__codelineno-54-4></a>(gdb)step
</span><span id=__span-54-5><a href=#__codelineno-54-5 id=__codelineno-54-5 name=__codelineno-54-5></a>7         return (int)cnt*(cnt+cnt);
</span><span id=__span-54-6><a href=#__codelineno-54-6 id=__codelineno-54-6 name=__codelineno-54-6></a>(gdb)step
</span><span id=__span-54-7><a href=#__codelineno-54-7 id=__codelineno-54-7 name=__codelineno-54-7></a>8       }
</span><span id=__span-54-8><a href=#__codelineno-54-8 id=__codelineno-54-8 name=__codelineno-54-8></a>(gdb)step
</span><span id=__span-54-9><a href=#__codelineno-54-9 id=__codelineno-54-9 name=__codelineno-54-9></a>main (argc=1, argv=0x7fffffffe3a8) at main3.c:15
</span><span id=__span-54-10><a href=#__codelineno-54-10 id=__codelineno-54-10 name=__codelineno-54-10></a>15        for(cnt = 0;cnt &lt; DATANUM;cnt++){
</span><span id=__span-54-11><a href=#__codelineno-54-11 id=__codelineno-54-11 name=__codelineno-54-11></a>(gdb)step
</span><span id=__span-54-12><a href=#__codelineno-54-12 id=__codelineno-54-12 name=__codelineno-54-12></a>16          data[cnt] = getdata(cnt);
</span><span id=__span-54-13><a href=#__codelineno-54-13 id=__codelineno-54-13 name=__codelineno-54-13></a>(gdb)step
</span><span id=__span-54-14><a href=#__codelineno-54-14 id=__codelineno-54-14 name=__codelineno-54-14></a>getdata (cnt=0 '\000') at main3.c:6
</span><span id=__span-54-15><a href=#__codelineno-54-15 id=__codelineno-54-15 name=__codelineno-54-15></a>6       {
</span><span id=__span-54-16><a href=#__codelineno-54-16 id=__codelineno-54-16 name=__codelineno-54-16></a>(gdb)
</span></code></pre></div> The fact that cnt returns to 0 at 255 means that cnt cannot hold more than 256, so the counter variable may not be of the correct type.<br> I checked the counter variable and found that cnt is defined as unsigned char (0-255).<br> This would have resulted in an infinite loop because the loop termination condition of 300 would never be reached. <div class="language-text highlight"><pre><span></span><code><span id=__span-55-1><a href=#__codelineno-55-1 id=__codelineno-55-1 name=__codelineno-55-1></a>unsigned char cnt = 0;
</span></code></pre></div> The expected behavior is achieved by setting the type of cnt to unsigned short (0-65535). <h3 id=6-3-segmentation-fault-analysis-example>6-3. Segmentation Fault Analysis Example<a title="Permanent link" class=headerlink href=#6-3-segmentation-fault-analysis-example>¶</a></h3><p>The source code should be the following.<br> Allocates memory with malloc and initializes buffers.</p><p></p><div class="language-bash highlight"><span class=filename>main.c</span><pre><span></span><code><span id=__span-56-1><a href=#__codelineno-56-1 id=__codelineno-56-1 name=__codelineno-56-1></a><span class=c1>#include &lt;stdio.h></span>
</span><span id=__span-56-2><a href=#__codelineno-56-2 id=__codelineno-56-2 name=__codelineno-56-2></a><span class=c1>#include &lt;stdlib.h></span>
</span><span id=__span-56-3><a href=#__codelineno-56-3 id=__codelineno-56-3 name=__codelineno-56-3></a><span class=c1>#include &lt;string.h></span>
</span><span id=__span-56-4><a href=#__codelineno-56-4 id=__codelineno-56-4 name=__codelineno-56-4></a>
</span><span id=__span-56-5><a href=#__codelineno-56-5 id=__codelineno-56-5 name=__codelineno-56-5></a>int<span class=w> </span>main<span class=o>(</span>int<span class=w> </span>argc,<span class=w> </span>char**<span class=w> </span>argv<span class=o>)</span>
</span><span id=__span-56-6><a href=#__codelineno-56-6 id=__codelineno-56-6 name=__codelineno-56-6></a><span class=o>{</span>
</span><span id=__span-56-7><a href=#__codelineno-56-7 id=__codelineno-56-7 name=__codelineno-56-7></a><span class=w>  </span>char<span class=w> </span>*buf<span class=p>;</span>
</span><span id=__span-56-8><a href=#__codelineno-56-8 id=__codelineno-56-8 name=__codelineno-56-8></a><span class=w>  </span><span class=nv>buf</span><span class=w> </span><span class=o>=</span><span class=w> </span>malloc<span class=o>(</span><span class=m>1</span>&lt;&lt;<span class=m>31</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-56-9><a href=#__codelineno-56-9 id=__codelineno-56-9 name=__codelineno-56-9></a><span class=w>  </span>memset<span class=o>(</span>buf,0x00,1024<span class=o>)</span><span class=p>;</span>
</span><span id=__span-56-10><a href=#__codelineno-56-10 id=__codelineno-56-10 name=__codelineno-56-10></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-56-11><a href=#__codelineno-56-11 id=__codelineno-56-11 name=__codelineno-56-11></a><span class=o>}</span>
</span></code></pre></div> Compile the program with the -g option.<br> Segmentation fault occurs when the program is executed. <div class="language-text highlight"><pre><span></span><code><span id=__span-57-1><a href=#__codelineno-57-1 id=__codelineno-57-1 name=__codelineno-57-1></a># ./testprog
</span><span id=__span-57-2><a href=#__codelineno-57-2 id=__codelineno-57-2 name=__codelineno-57-2></a>Segmentation fault (core dumped)
</span></code></pre></div> Debugging with gdb. <div class="language-text highlight"><pre><span></span><code><span id=__span-58-1><a href=#__codelineno-58-1 id=__codelineno-58-1 name=__codelineno-58-1></a># gdb testprog
</span><span id=__span-58-2><a href=#__codelineno-58-2 id=__codelineno-58-2 name=__codelineno-58-2></a>...
</span><span id=__span-58-3><a href=#__codelineno-58-3 id=__codelineno-58-3 name=__codelineno-58-3></a>For help, type "help".
</span><span id=__span-58-4><a href=#__codelineno-58-4 id=__codelineno-58-4 name=__codelineno-58-4></a>Type "apropos word" to search for commands related to "word"...
</span><span id=__span-58-5><a href=#__codelineno-58-5 id=__codelineno-58-5 name=__codelineno-58-5></a>Reading symbols from testprog...
</span><span id=__span-58-6><a href=#__codelineno-58-6 id=__codelineno-58-6 name=__codelineno-58-6></a>(gdb) run
</span><span id=__span-58-7><a href=#__codelineno-58-7 id=__codelineno-58-7 name=__codelineno-58-7></a>Starting program: /home/root/debug/testprog
</span><span id=__span-58-8><a href=#__codelineno-58-8 id=__codelineno-58-8 name=__codelineno-58-8></a>
</span><span id=__span-58-9><a href=#__codelineno-58-9 id=__codelineno-58-9 name=__codelineno-58-9></a>Program received signal SIGSEGV, Segmentation fault.
</span><span id=__span-58-10><a href=#__codelineno-58-10 id=__codelineno-58-10 name=__codelineno-58-10></a>__memset_avx2_unaligned_erms () at ../sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S:200
</span><span id=__span-58-11><a href=#__codelineno-58-11 id=__codelineno-58-11 name=__codelineno-58-11></a>200     ../sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S: No such file or directory.
</span><span id=__span-58-12><a href=#__codelineno-58-12 id=__codelineno-58-12 name=__codelineno-58-12></a>(gdb)
</span></code></pre></div> Check backtrace as SIGSEGV occurs. <div class="language-text highlight"><pre><span></span><code><span id=__span-59-1><a href=#__codelineno-59-1 id=__codelineno-59-1 name=__codelineno-59-1></a>(gdb) backtrace
</span><span id=__span-59-2><a href=#__codelineno-59-2 id=__codelineno-59-2 name=__codelineno-59-2></a>#0  __memset_avx2_unaligned_erms () at ../sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S:200
</span><span id=__span-59-3><a href=#__codelineno-59-3 id=__codelineno-59-3 name=__codelineno-59-3></a>#1  0x00005555555551a2 in main (argc=1, argv=0x7fffffffe3a8) at main.c:9
</span><span id=__span-59-4><a href=#__codelineno-59-4 id=__codelineno-59-4 name=__codelineno-59-4></a>(gdb)
</span></code></pre></div> Segmentation fault occurs at line 9 of the code, so the frame is switched. <div class="language-text highlight"><pre><span></span><code><span id=__span-60-1><a href=#__codelineno-60-1 id=__codelineno-60-1 name=__codelineno-60-1></a>(gdb) frame 1
</span><span id=__span-60-2><a href=#__codelineno-60-2 id=__codelineno-60-2 name=__codelineno-60-2></a>#1  0x00005555555551a2 in main (argc=1, argv=0x7fffffffe3a8) at main.c:9
</span><span id=__span-60-3><a href=#__codelineno-60-3 id=__codelineno-60-3 name=__codelineno-60-3></a>9         memset(buf,0x00,1024);
</span><span id=__span-60-4><a href=#__codelineno-60-4 id=__codelineno-60-4 name=__codelineno-60-4></a>(gdb)
</span></code></pre></div> Segmentation fault occurs in memset, so I check the buf contents and the buf address is NULL. <div class="language-text highlight"><pre><span></span><code><span id=__span-61-1><a href=#__codelineno-61-1 id=__codelineno-61-1 name=__codelineno-61-1></a>(gdb) print buf
</span><span id=__span-61-2><a href=#__codelineno-61-2 id=__codelineno-61-2 name=__codelineno-61-2></a>$1 = 0x0
</span><span id=__span-61-3><a href=#__codelineno-61-3 id=__codelineno-61-3 name=__codelineno-61-3></a>(gdb)
</span></code></pre></div> Once the program is finished, set a breakpoint in the main function and a watchpoint in buf. <div class="language-text highlight"><pre><span></span><code><span id=__span-62-1><a href=#__codelineno-62-1 id=__codelineno-62-1 name=__codelineno-62-1></a>(gdb) kill
</span><span id=__span-62-2><a href=#__codelineno-62-2 id=__codelineno-62-2 name=__codelineno-62-2></a>Kill the program being debugged? (y or n) y
</span><span id=__span-62-3><a href=#__codelineno-62-3 id=__codelineno-62-3 name=__codelineno-62-3></a>[Inferior 1 (process 47511) killed]
</span><span id=__span-62-4><a href=#__codelineno-62-4 id=__codelineno-62-4 name=__codelineno-62-4></a>(gdb) break main
</span><span id=__span-62-5><a href=#__codelineno-62-5 id=__codelineno-62-5 name=__codelineno-62-5></a>Breakpoint 1 at 0x555555555169: file main.c, line 6.
</span><span id=__span-62-6><a href=#__codelineno-62-6 id=__codelineno-62-6 name=__codelineno-62-6></a>(gdb) run
</span><span id=__span-62-7><a href=#__codelineno-62-7 id=__codelineno-62-7 name=__codelineno-62-7></a>Starting program: /home/pokyuser/hello_apl/testprog
</span><span id=__span-62-8><a href=#__codelineno-62-8 id=__codelineno-62-8 name=__codelineno-62-8></a>
</span><span id=__span-62-9><a href=#__codelineno-62-9 id=__codelineno-62-9 name=__codelineno-62-9></a>Breakpoint 1, main (argc=21845, argv=0x0) at main.c:6
</span><span id=__span-62-10><a href=#__codelineno-62-10 id=__codelineno-62-10 name=__codelineno-62-10></a>6       {
</span><span id=__span-62-11><a href=#__codelineno-62-11 id=__codelineno-62-11 name=__codelineno-62-11></a>(gdb) awatch buf
</span><span id=__span-62-12><a href=#__codelineno-62-12 id=__codelineno-62-12 name=__codelineno-62-12></a>Hardware access (read/write) watchpoint 2: buf
</span><span id=__span-62-13><a href=#__codelineno-62-13 id=__codelineno-62-13 name=__codelineno-62-13></a>(gdb)
</span></code></pre></div> Checking the buf pointer change, it remains NULL even after allocating memory with malloc. <div class="language-text highlight"><pre><span></span><code><span id=__span-63-1><a href=#__codelineno-63-1 id=__codelineno-63-1 name=__codelineno-63-1></a>(gdb) continue
</span><span id=__span-63-2><a href=#__codelineno-63-2 id=__codelineno-63-2 name=__codelineno-63-2></a>Continuing.
</span><span id=__span-63-3><a href=#__codelineno-63-3 id=__codelineno-63-3 name=__codelineno-63-3></a>
</span><span id=__span-63-4><a href=#__codelineno-63-4 id=__codelineno-63-4 name=__codelineno-63-4></a>Hardware access (read/write) watchpoint 2: buf
</span><span id=__span-63-5><a href=#__codelineno-63-5 id=__codelineno-63-5 name=__codelineno-63-5></a>
</span><span id=__span-63-6><a href=#__codelineno-63-6 id=__codelineno-63-6 name=__codelineno-63-6></a>Value = 0x0
</span><span id=__span-63-7><a href=#__codelineno-63-7 id=__codelineno-63-7 name=__codelineno-63-7></a>main (argc=1, argv=0x7fffffffe3a8) at main.c:9
</span><span id=__span-63-8><a href=#__codelineno-63-8 id=__codelineno-63-8 name=__codelineno-63-8></a>9         memset(buf,0x00,1024);
</span><span id=__span-63-9><a href=#__codelineno-63-9 id=__codelineno-63-9 name=__codelineno-63-9></a>(gdb) continue
</span><span id=__span-63-10><a href=#__codelineno-63-10 id=__codelineno-63-10 name=__codelineno-63-10></a>Continuing.
</span><span id=__span-63-11><a href=#__codelineno-63-11 id=__codelineno-63-11 name=__codelineno-63-11></a>
</span><span id=__span-63-12><a href=#__codelineno-63-12 id=__codelineno-63-12 name=__codelineno-63-12></a>Hardware access (read/write) watchpoint 2: buf
</span><span id=__span-63-13><a href=#__codelineno-63-13 id=__codelineno-63-13 name=__codelineno-63-13></a>
</span><span id=__span-63-14><a href=#__codelineno-63-14 id=__codelineno-63-14 name=__codelineno-63-14></a>Value = 0x0
</span><span id=__span-63-15><a href=#__codelineno-63-15 id=__codelineno-63-15 name=__codelineno-63-15></a>0x0000555555555190 in main (argc=1, argv=0x7fffffffe3a8) at main.c:9
</span><span id=__span-63-16><a href=#__codelineno-63-16 id=__codelineno-63-16 name=__codelineno-63-16></a>9         memset(buf,0x00,1024);
</span><span id=__span-63-17><a href=#__codelineno-63-17 id=__codelineno-63-17 name=__codelineno-63-17></a>(gdb) continue
</span><span id=__span-63-18><a href=#__codelineno-63-18 id=__codelineno-63-18 name=__codelineno-63-18></a>Continuing.
</span><span id=__span-63-19><a href=#__codelineno-63-19 id=__codelineno-63-19 name=__codelineno-63-19></a>
</span><span id=__span-63-20><a href=#__codelineno-63-20 id=__codelineno-63-20 name=__codelineno-63-20></a>Program received signal SIGSEGV, Segmentation fault.
</span><span id=__span-63-21><a href=#__codelineno-63-21 id=__codelineno-63-21 name=__codelineno-63-21></a>__memset_avx2_unaligned_erms () at ../sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S:200
</span><span id=__span-63-22><a href=#__codelineno-63-22 id=__codelineno-63-22 name=__codelineno-63-22></a>200     ../sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S: No such file or directory.
</span><span id=__span-63-23><a href=#__codelineno-63-23 id=__codelineno-63-23 name=__codelineno-63-23></a>(gdb)
</span></code></pre></div> Check the malloc function to confirm that malloc is specified to return NULL if memory cannot be allocated. <div class="language-text highlight"><pre><span></span><code><span id=__span-64-1><a href=#__codelineno-64-1 id=__codelineno-64-1 name=__codelineno-64-1></a>buf = malloc(1&lt;&lt;31);
</span></code></pre></div> The memory size being allocated by malloc was 4 GB, and NULL was returned because the huge size was not allocated.<br> Since the size set in memset is 1024 bytes, the problem can be solved by either setting the size to be acquired by malloc<br> to 1024 as well or checking the return value of malloc, and if it is NULL, do not access it, etc.</div></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button class="md-top md-icon" data-md-component=top hidden type=button><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top</button></main><footer class=md-footer><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright><div class=md-copyright__highlight>©2024, 2025 Renesas Electronics Corporation.</div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a></div><div class=md-social><a title="Notices & Terms" class=footer-link href=https://renesas-rz.github.io/rz_solution/legal_notices/ target=_blank> Notices & Terms </a><a title="Renesas RZ Software on GitHub" class=md-social__link href=https://github.com/renesas-rz rel=noopener target=_blank> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a><a title="Go to Renesas.com website" class=md-social__link href=https://www.renesas.com/ rel=noopener target=_blank> <svg viewbox="0 0 576 512" xmlns=http://www.w3.org/2000/svg><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1v16.2c0 22.1-17.9 40-40 40h-16c-1.1 0-2.2 0-3.3-.1-1.4.1-2.8.1-4.2.1L416 512h-24c-22.1 0-40-17.9-40-40v-88c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v88c0 22.1-17.9 40-40 40h-55.9c-1.5 0-3-.1-4.5-.2-1.2.1-2.4.2-3.6.2h-16c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9.1-2.8v-69.7h-32c-18 0-32-14-32-32.1 0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7l255.4 224.5c8 7 12 15 11 24"/></svg> </a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-progress data-md-component=progress role=progressbar></div><script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "navigation.instant", "navigation.instant.progress", "navigation.prune", "navigation.top", "navigation.tracking", "search.highlight", "search.suggest", "toc.integrate", "toc.follow"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script><script src=../../assets/javascripts/bundle.56ea9cef.min.js></script><script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script><script src=../../assets/javascripts/tablesort.8bfa3d.min.js></script><script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });</script></body></html>